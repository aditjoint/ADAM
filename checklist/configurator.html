<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdamConsult | Enterprise Hardware Builder</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <style>
        /* --- CSS STYLES --- */
        :root {
            --primary: #003366; /* AdamConsult Corporate Blue */
            --secondary: #0055a5;
            --accent: #f0ad4e;
            --bg-gray: #f4f6f9;
            --text-main: #333;
            --border: #ddd;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            background-color: var(--bg-gray);
            color: var(--text-main);
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* Header */
        header {
            background-color: var(--primary);
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 10;
        }
        header h1 { margin: 0; font-size: 1.4rem; font-weight: 600; }
        .status-badge { font-size: 0.85rem; background: rgba(255,255,255,0.1); padding: 5px 10px; border-radius: 4px; }

        /* Layout Grid */
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* 1. Sidebar Nav */
        .sidebar {
            width: 240px;
            background: white;
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .nav-btn {
            background: none;
            border: none;
            padding: 15px 20px;
            text-align: left;
            font-size: 0.95rem;
            color: #555;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: 0.2s;
            font-weight: 500;
        }
        .nav-btn:hover { background-color: #f8f9fa; color: var(--primary); }
        .nav-btn.active { background-color: var(--primary); color: white; border-color: var(--primary); }

        /* 2. Content Area */
        .content-area {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            background-color: #fff;
        }

        .config-card {
            max-width: 800px;
            margin: 0 auto;
            animation: fadeIn 0.4s ease-out;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        h2.section-title {
            color: var(--primary);
            border-bottom: 2px solid var(--accent);
            padding-bottom: 10px;
            margin-top: 0;
            font-size: 1.8rem;
        }

        .form-group { margin-bottom: 25px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #444; }
        
        select, input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 1rem;
            background: #fff;
            transition: border 0.2s;
        }
        select:focus, input:focus { outline: none; border-color: var(--secondary); box-shadow: 0 0 0 3px rgba(0,85,165,0.1); }

        .add-btn {
            background-color: var(--secondary);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: background 0.2s;
        }
        .add-btn:hover { background-color: var(--primary); }

        /* 3. BOQ Sidebar */
        .boq-sidebar {
            width: 350px;
            background: #f8f9fa;
            border-left: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            box-shadow: -2px 0 10px rgba(0,0,0,0.05);
        }

        .boq-header {
            padding: 20px;
            background: #fff;
            border-bottom: 1px solid var(--border);
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--primary);
        }

        .boq-list {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
        }

        .boq-item {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 10px;
            position: relative;
            font-size: 0.9rem;
        }
        
        .boq-item strong { display: block; color: var(--primary); margin-bottom: 4px; }
        .boq-item small { color: #666; display: block; }
        .boq-price { float: right; font-weight: bold; color: #333; }
        
        .remove-icon {
            position: absolute;
            top: 5px;
            right: 5px;
            color: #ccc;
            cursor: pointer;
            font-size: 1.2rem;
            line-height: 0.8;
        }
        .remove-icon:hover { color: red; }

        .boq-footer {
            padding: 20px;
            background: white;
            border-top: 1px solid var(--border);
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .grand-total {
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--primary);
            border-top: 2px solid var(--text-main);
            padding-top: 10px;
            margin-top: 10px;
        }

        .quote-btn {
            background-color: var(--accent);
            color: #333;
            border: none;
            width: 100%;
            padding: 15px;
            font-weight: bold;
            font-size: 1.1rem;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 15px;
        }
        .quote-btn:hover { background-color: #e09b3e; }

        /* Responsive */
        @media (max-width: 1024px) {
            .main-container { flex-direction: column; overflow: auto; height: auto; }
            .sidebar { width: 100%; flex-direction: row; overflow-x: auto; border-bottom: 1px solid var(--border); }
            .nav-btn { min-width: 150px; text-align: center; }
            .boq-sidebar { width: 100%; height: auto; }
        }
    </style>
</head>
<body>

<header>
    <h1>AdamConsult <strong>Builder</strong></h1>
    <div class="status-badge" id="conn-status">Initializing Database...</div>
</header>

<div class="main-container">

    <div class="sidebar">
        <button class="nav-btn active" onclick="switchTab('compute')">Compute & Servers</button>
        <button class="nav-btn" onclick="switchTab('storage')">Storage (SAN/NAS)</button>
        <button class="nav-btn" onclick="switchTab('network')">Networking</button>
        <button class="nav-btn" onclick="switchTab('security')">Security & Firewalls</button>
        <button class="nav-btn" onclick="switchTab('software')">Software & OS</button>
        <button class="nav-btn" onclick="switchTab('racks')">Infra (Racks/UPS)</button>
        <button class="nav-btn" onclick="switchTab('endpoints')">Laptops & Desktops</button>
        <button class="nav-btn" onclick="switchTab('cabling')">Structured Cabling</button>
        <button class="nav-btn" onclick="switchTab('physical_sec')">CCTV & Access</button>
        <button class="nav-btn" onclick="switchTab('av_room')">Meeting Room AV</button>
    </div>

    <div class="content-area">
        <div class="config-card">
            <h2 id="section-title" class="section-title">Compute Infrastructure</h2>
            
            <div class="form-group">
                <label>Select Hardware Model</label>
                <select id="sel-model">
                    <option value="0">Loading Database...</option>
                </select>
            </div>

            <div class="form-group">
                <label>Add-ons / Upgrades (Optional)</label>
                <select id="sel-addon">
                    <option value="0" data-price="0">-- None --</option>
                </select>
            </div>

            <div class="form-group">
                <label>Quantity</label>
                <input type="number" id="sel-qty" value="1" min="1" max="500">
            </div>

            <button class="add-btn" onclick="addToCart()">Add to Bill of Materials</button>
            
            <p style="margin-top:20px; font-size:0.8rem; color:#888;">
                * All prices are <strong>Ex-Mumbai Warehouse (INR)</strong> and exclude GST (18%).
            </p>
        </div>
    </div>

    <div class="boq-sidebar">
        <div class="boq-header">Your Build (BOQ)</div>
        
        <div class="boq-list" id="cart-list">
            <div style="text-align:center; color:#999; margin-top:20px;">
                <em>No items added yet.</em>
            </div>
        </div>

        <div class="boq-footer">
            <div class="total-row">
                <span>Subtotal:</span>
                <span id="subtotal">₹0</span>
            </div>
            <div class="total-row" style="color:#666;">
                <span>GST (18%):</span>
                <span id="tax">₹0</span>
            </div>
            <div class="total-row grand-total">
                <span>Total:</span>
                <span id="grand-total">₹0</span>
            </div>
            <button class="quote-btn" onclick="requestQuote()">Request Formal Quote</button>
        </div>
    </div>

</div>

<script>
    // --- 1. CONFIGURATION ---
    // PASTE YOUR CSV LINK HERE
    const sheetURL = 'YOUR_GOOGLE_SHEET_CSV_LINK_HERE'; 
    // ^ REPLACE ABOVE LINK WITH YOUR ACTUAL GOOGLE SHEET CSV LINK ^

    // --- 2. STATE ---
    let db = [];
    let cart = [];
    let currentCategory = 'compute';

    const categoryTitles = {
        'compute': 'Compute & Servers',
        'storage': 'SAN / NAS Storage',
        'network': 'Switches & Routers',
        'security': 'Firewalls & Security',
        'software': 'Licenses & OS',
        'racks': 'Racks & Power',
        'endpoints': 'Laptops & Desktops',
        'cabling': 'Structured Cabling',
        'physical_sec': 'CCTV & Biometrics',
        'av_room': 'Meeting Room AV'
    };

    // --- 3. INIT ---
    window.onload = function() {
        Papa.parse(sheetURL, {
            download: true,
            header: true,
            skipEmptyLines: true,
            complete: function(results) {
                if(results.data && results.data.length > 0) {
                    db = results.data;
                    document.getElementById('conn-status').innerHTML = '● Live Pricing: Active (Ex-Mumbai)';
                    document.getElementById('conn-status').style.color = '#81d4fa';
                    renderForm('compute');
                } else {
                    document.getElementById('conn-status').innerText = 'Error: Empty Database';
                }
            },
            error: function(err) {
                document.getElementById('conn-status').innerText = 'Connection Failed';
                console.error(err);
            }
        });
    };

    // --- 4. RENDER UI ---
    function switchTab(cat) {
        currentCategory = cat;
        
        // Update Nav
        document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');

        // Update Title
        document.getElementById('section-title').innerText = categoryTitles[cat];

        renderForm(cat);
    }

    function renderForm(cat) {
        const modelSel = document.getElementById('sel-model');
        const addonSel = document.getElementById('sel-addon');

        modelSel.innerHTML = '<option value="0" data-price="0">-- Select Model --</option>';
        addonSel.innerHTML = '<option value="0" data-price="0">-- None --</option>';

        // Filter Data
        const models = db.filter(item => item.Category === cat && item.Type === 'model');
        const addons = db.filter(item => item.Category === cat && item.Type === 'addon');

        // Populate
        models.forEach(m => {
            if(m.Name && m.Price) {
                modelSel.innerHTML += `<option value="${m.Name}" data-price="${m.Price}">${m.Name} - ₹${parseInt(m.Price).toLocaleString('en-IN')}</option>`;
            }
        });

        addons.forEach(a => {
            if(a.Name && a.Price) {
                addonSel.innerHTML += `<option value="${a.Name}" data-price="${a.Price}">${a.Name} (+₹${parseInt(a.Price).toLocaleString('en-IN')})</option>`;
            }
        });
    }

    // --- 5. CART LOGIC ---
    function addToCart() {
        const modelSel = document.getElementById('sel-model');
        const addonSel = document.getElementById('sel-addon');
        const qtyInput = document.getElementById('sel-qty');
        
        if (modelSel.value === '0') {
            alert("Please select a hardware model.");
            return;
        }

        const modelName = modelSel.value;
        const modelPrice = parseInt(modelSel.options[modelSel.selectedIndex].getAttribute('data-price'));
        
        const addonName = addonSel.value;
        const addonPrice = parseInt(addonSel.options[addonSel.selectedIndex].getAttribute('data-price'));
        
        const qty = parseInt(qtyInput.value);
        if(qty < 1) return;

        const unitTotal = modelPrice + addonPrice;

        cart.push({
            id: Date.now(),
            name: modelName,
            addon: addonName === '0' ? '' : addonName,
            qty: qty,
            unitPrice: unitTotal,
            totalPrice: unitTotal * qty
        });

        renderCart();
    }

    function renderCart() {
        const list = document.getElementById('cart-list');
        list.innerHTML = '';
        
        let subtotal = 0;

        if(cart.length === 0) {
            list.innerHTML = '<div style="text-align:center; color:#999; margin-top:20px;"><em>No items added yet.</em></div>';
        } else {
            cart.forEach((item, index) => {
                subtotal += item.totalPrice;
                list.innerHTML += `
                    <div class="boq-item">
                        <span class="remove-icon" onclick="removeItem(${index})">&times;</span>
                        <strong>${item.name}</strong>
                        ${item.addon ? '<small>+ ' + item.addon + '</small>' : ''}
                        <div style="margin-top:5px; display:flex; justify-content:space-between; align-items:center;">
                            <span style="font-size:0.85rem; background:#eee; padding:2px 6px; border-radius:3px;">Qty: ${item.qty}</span>
                            <span class="boq-price">₹${item.totalPrice.toLocaleString('en-IN')}</span>
                        </div>
                    </div>
                `;
            });
        }

        // Tax Calc
        const gst = subtotal * 0.18;
        const grandTotal = subtotal + gst;

        document.getElementById('subtotal').innerText = '₹' + subtotal.toLocaleString('en-IN');
        document.getElementById('tax').innerText = '₹' + gst.toLocaleString('en-IN');
        document.getElementById('grand-total').innerText = '₹' + grandTotal.toLocaleString('en-IN');
    }

    function removeItem(index) {
        cart.splice(index, 1);
        renderCart();
    }

    function requestQuote() {
        if(cart.length === 0) {
            alert("Your cart is empty.");
            return;
        }
        
        const total = document.getElementById('grand-total').innerText;
        alert(`Quote Request Sent Successfully!\n\nReference ID: AC-${Math.floor(Math.random()*10000)}\nEstimated Total: ${total}\n\nOur Sales Team will contact you shortly with the formal PDF.`);
    }

</script>

</body>
</html>
